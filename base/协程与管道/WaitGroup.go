package main

import (
	"fmt"
	"strconv"
	"sync"
)

/* 
	WaitGroup => è®©ã€ä¸»çº¿ç¨‹ã€‘ç­‰å¾…æ‰€æœ‰çš„ã€å­çº¿ç¨‹ã€‘æ‰§è¡Œå®Œæ¯•å†ç»“æŸ, å¦åˆ™ä¸»çº¿ç¨‹ç»“æŸåå­çº¿ç¨‹ä¹Ÿä¼šç»“æŸäº†
*/

var waitGroup sync.WaitGroup  // ç±»ä¼¼äºè®¡æ•°å™¨ => sync.WaitGroupæ˜¯ä¸€ä¸ªè®¡æ•°å™¨, ç”¨äºç­‰å¾…æŒ‡å®šæ•°é‡çš„äº‹ä»¶å®Œæˆ

func main() {

	// ã€ğŸš€å†™æ³• 2 ã€‘ğŸ”¥ å¯åŠ¨ 5 ä¸ªè®¡æ•°å™¨ ğŸ”¥ => æ€»æ•°æ˜¯ 5 ä¸ªè¯» => è®°å¾—æ”¹ !!
	// waitGroup.Add(2)

	// å¯åŠ¨ 5 ä¸ªåç¨‹
	for i := 0; i < 5; i++ {
		// ğŸ”¥ ã€1 - å¯åŠ¨ x ä¸ªè®¡æ•°å™¨ã€‘ åŠ ä¸€, è¡¨ç¤ºæ–° + 1 ä¸ªåç¨‹è®¡æ•°å™¨
		waitGroup.Add(1) // ã€ğŸš€å†™æ³• 1 ã€‘æ¯æ¬¡å¢åŠ ä¸€ä¸ªåç¨‹è®¡æ•°å™¨ => è®°å¾—æ”¹!! 

		go func(i int) {
			fmt.Println("å­çº¿ç¨‹" + strconv.Itoa(i) + "æ‰§è¡Œå®Œæ¯•")
			// ğŸ”¥ ã€2 - è®¡æ•°å™¨ã€‘ å‡ä¸€, è¡¨ç¤ºä¸€ä¸ªåç¨‹æ‰§è¡Œå®Œæ¯• => åç¨‹æ‰§è¡Œå®Œæˆ -1
			defer waitGroup.Done() 
		}(i)
	}

	// ğŸš€ ã€3 - é˜»å¡ã€‘ä¸»çº¿ç¨‹ => ç­‰å¾…æ‰€æœ‰çš„å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯• => è®¡æ•°å™¨ä¸º 0
	waitGroup.Wait()
}