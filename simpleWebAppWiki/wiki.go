package main

import (
	// "fmt"
	"os"
)



// å®šä¹‰ Pagr çš„æ•°æ®ç»“æ„, ç”¨äºå­˜å‚¨é¡µé¢çš„æ ‡é¢˜å’Œå†…å®¹
type Page struct {
	Title string
	Body []byte // ä¸ºäº†æ–¹ä¾¿å­˜å‚¨, ä¸å®šä¹‰ä¸º string, è€Œæ˜¯å®šä¹‰ä¸º []byte æ•°ç»„
}


// ä¿å­˜é¡µé¢çš„ç»“æ„ä½“æ–¹æ³•
func (p *Page) savePage() error { // ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯å€¼
	filename := p.Title + ".txt" // ä»¥ã€æ ‡é¢˜ã€‘ä½œä¸ºæ–‡ä»¶å
	return os.WriteFile(filename, p.Body, 0600) // 0600 ä¸ºå…«è¿›åˆ¶, è¡¨ç¤ºåªæœ‰å½“å‰ç”¨æˆ·æ‰æœ‰è¯»å†™æƒé™ => ğŸŒŸ å¦‚æœsaveæˆåŠŸï¼Œå®ƒè¿”å›nil; å¦‚æœå¤±è´¥, å®ƒè¿”å›é”™è¯¯ä¿¡æ¯, å¦‚æœ err != nil, åˆ™è¡¨ç¤ºæœ‰ âŒ é”™è¯¯
}


// è¯»å–ä¿å­˜åçš„é¡µé¢æ•°æ®çš„æ–¹æ³• (åŠ è½½ä¸€ä¸ªé¡µé¢æ•°æ®å¹¶è¿”å›ä¸€ä¸ªæŒ‡å‘è¯¥é¡µé¢çš„æŒ‡é’ˆ, ä»¥ä¾¿åç»­å¯ä»¥ä½¿ç”¨æˆ–ä¿®æ”¹è¿™ä¸ªé¡µé¢çš„æ•°æ®)
func loadPage(title string) (*Page, error) { // (è¿”å› *Page è·Ÿ err)  => *Page è¡¨ç¤ºè¿”å›å€¼æ˜¯æ˜¯ä¸€ä¸ªæŒ‡é’ˆ => æŒ‡å‘ Page ç»“æ„ä½“çš„æŒ‡é’ˆ, å¦‚ä¸‹ ğŸ‘‡
	filename := title + ".txt"
	body, err := os.ReadFile(filename)
	if err != nil { // å¤„ç†é”™è¯¯, æ¯”å¦‚æ–‡ä»¶ä¸å­˜åœ¨
		return nil, err // å¦‚æœ err != nil, åˆ™è¡¨ç¤ºæœ‰ âŒ é”™è¯¯, è¿”å› nil
	}
	return &Page{Title: title, Body: body}, nil // ğŸ‘ˆ åˆ›å»ºä¸€ä¸ªæ–°çš„ Page å®ä¾‹, å¹¶è¿”å›å®ƒçš„æŒ‡é’ˆ ğŸŒŸ
}